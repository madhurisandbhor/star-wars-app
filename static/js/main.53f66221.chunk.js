(this["webpackJsonpstar-wars-app"]=this["webpackJsonpstar-wars-app"]||[]).push([[0],{134:function(e,t,n){},135:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(38),i=n.n(r),c=n(9),s=n(41),o=n(16),d=n(200),u=Object(d.a)((function(e){return{header:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",height:"6.5rem",margin:"auto",padding:"0 2rem",boxShadow:"0 0.4rem 0.8rem 0 rgba(0, 0, 0, 0.2)",background:"#ffffff","& > ul":{listStyle:"none","& > li > a":{textDecoration:"none",display:"flex",alignItems:"center",flexDirection:"column","& > p:first-child":{textTransform:"uppercase",fontSize:"2.4rem",color:"#000000",display:"block",fontWeight:"bold"},"& > p:last-child":{color:e.palette.primary.main,marginTop:"-0.5rem"}},"@media(max-width: 768px)":{marginLeft:0}},"@media(max-width: 768px)":{flexDirection:"column",padding:"0.5rem",alignItems:"center",justifyContent:"space-around"}}}})),b=n(2),m=function(){var e=u();return Object(b.jsx)("header",{className:e.header,children:Object(b.jsx)("ul",{children:Object(b.jsx)("li",{children:Object(b.jsxs)(s.c,{to:"/",children:[Object(b.jsx)("p",{children:"Star Wars"}),Object(b.jsx)("p",{children:"Characters"})]})})})})},j=Object(a.memo)(m),f=n(78),h=n.n(f),p=n(15),O=n(94),x=n(205),g=n(206);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function w(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var C=a.createElement("g",null,a.createElement("path",{d:"M433.601,67.001c-24.7-24.7-57.4-38.2-92.3-38.2s-67.7,13.6-92.4,38.3l-12.9,12.9l-13.1-13.1 c-24.7-24.7-57.6-38.4-92.5-38.4c-34.8,0-67.6,13.6-92.2,38.2c-24.7,24.7-38.3,57.5-38.2,92.4c0,34.9,13.7,67.6,38.4,92.3 l187.8,187.8c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-3.9l188.2-187.5c24.7-24.7,38.3-57.5,38.3-92.4 C471.801,124.501,458.301,91.701,433.601,67.001z M414.401,232.701l-178.7,178l-178.3-178.3c-19.6-19.6-30.4-45.6-30.4-73.3 s10.7-53.7,30.3-73.2c19.5-19.5,45.5-30.3,73.1-30.3c27.7,0,53.8,10.8,73.4,30.4l22.6,22.6c5.3,5.3,13.8,5.3,19.1,0l22.4-22.4 c19.6-19.6,45.7-30.4,73.3-30.4c27.6,0,53.6,10.8,73.2,30.3c19.6,19.6,30.3,45.6,30.3,73.3 C444.801,187.101,434.001,213.101,414.401,232.701z"})),y=a.createElement("g",null),S=a.createElement("g",null),N=a.createElement("g",null),E=a.createElement("g",null),k=a.createElement("g",null),I=a.createElement("g",null),P=a.createElement("g",null),A=a.createElement("g",null),D=a.createElement("g",null),V=a.createElement("g",null),z=a.createElement("g",null),L=a.createElement("g",null),F=a.createElement("g",null),R=a.createElement("g",null),B=a.createElement("g",null);function M(e,t){var n=e.title,l=e.titleId,r=w(e,["title","titleId"]);return a.createElement("svg",v({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 471.701 471.701",style:{enableBackground:"new 0 0 471.701 471.701"},fill:"red",xmlSpace:"preserve",ref:t,"aria-labelledby":l},r),n?a.createElement("title",{id:l},n):null,C,y,S,N,E,k,I,P,A,D,V,z,L,F,R,B)}var T=a.forwardRef(M);n.p;function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Y(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var H=a.createElement("path",{id:"bcf2f889-e5ee-4d72-8984-43405cbeb52a","data-name":"favourite",d:"M23.5,7A6,6,0,0,0,12,4.61,6,6,0,0,0,.84,5C0,7.45.82,9.94,2.51,12h0L12,23l9.71-11.22A7.74,7.74,0,0,0,23.5,7Z"});function _(e,t){var n=e.title,l=e.titleId,r=Y(e,["title","titleId"]);return a.createElement("svg",W({width:"24px",height:"24px",fill:"red",viewBox:"0 0 24 24",id:"36a96b66-7f0e-4948-88ac-a5df6d326d79","data-name":"Livello 1",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":l},r),void 0===n?a.createElement("title",{id:l},"prime"):n?a.createElement("title",{id:l},n):null,H)}var q=a.forwardRef(_),G=(n.p,Object(d.a)((function(e){return{list:{display:"flex",flexFlow:"row wrap",margin:"2rem 0",justifyContent:"center"},card:{transition:"0.3s",flex:"0 0 23%",margin:"1rem",height:"15rem",backgroundColor:"#ffffff",display:"flex",flexDirection:"column",padding:"2rem",position:"relative","&:hover":{boxShadow:"0 0.8rem 1.6rem 0 rgba(0, 0, 0, 0.2)",transform:"scale(1.02)",cursor:"pointer"},"@media (max-width: 1024px) and (min-width:480px)":{flex:"0 0 40%",height:"12rem",padding:"1rem"},"@media(max-width: 480px)":{flex:"0 0 98%"}},name:{textAlign:"center",margin:"auto",padding:"0.3rem",color:e.palette.primary.main,fontSize:"1.8rem"},details:{display:"flex","& > div":{width:"100%",height:"100%",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem 0.8rem",opacity:"0.9",padding:"0.5rem",margin:"auto",fontSize:"1.4rem"}},label:{textAlign:"right","&::after":{content:'":"'}},labelValue:{textAlign:"left",overflow:"hidden",textOverflow:"ellipsis"},buttonIcons:{textAlign:"end",width:"100%",position:"absolute",right:"0.8rem",top:"0.8rem",zIndex:99},svg:{width:"2.4rem",height:"2.4rem"}}}))),J=function(e){var t=e.list,n=e.favouriteList,a=e.toggleFavorite,l=G(),r=Object(o.g)();return Object(b.jsx)("div",{className:l.list,children:t.length>0&&t.map((function(e){return Object(b.jsxs)(x.a,{className:l.card,onClick:function(){return function(e){r.push("/character-details",{item:e})}(e)},children:[Object(b.jsx)("div",{className:l.buttonIcons,children:n&&n.includes(e.id)?Object(b.jsx)(g.a,{onClick:function(t){return a(t,e.id)},children:Object(b.jsx)(q,{className:l.svg})}):Object(b.jsx)(g.a,{onClick:function(t){return a(t,e.id)},children:Object(b.jsx)(T,{"data-testid":"heartSvg",className:l.svg})})}),Object(b.jsx)("div",{className:l.details,children:Object(b.jsxs)("div",{children:[Object(b.jsx)("label",{className:l.label,children:"Birth Year"}),Object(b.jsx)("span",{className:l.labelValue,children:e.birthYear}),Object(b.jsx)("label",{className:l.label,children:"Gender"}),Object(b.jsx)("span",{className:l.labelValue,children:e.gender}),Object(b.jsx)("label",{className:l.label,children:"Films"}),Object(b.jsx)("span",{className:l.labelValue,children:e.filmConnection.films.length})]})}),Object(b.jsx)("div",{className:l.name,children:e.name})]},e.id)}))})},X=Object(a.memo)(J),Z=n(209),K=n(208),Q=Object(d.a)((function(e){return{loading:{'&&[class*="MuiCircularProgress-colorPrimary"]':{color:e.palette.primary.main}}}})),U=function(){var e=Q();return Object(b.jsx)(K.a,{sx:{display:"flex",justifyContent:"center"},children:Object(b.jsx)(Z.a,{color:"primary",classes:{root:e.loading}})})},$=Object(a.memo)(U),ee=n(79),te=n(199),ne=n(204),ae=n(96),le=n.n(ae),re=Object(d.a)((function(){return{searchContainer:{width:"40%",display:"flex",alignItems:"center","@media(max-width: 480px)":{width:"100%",marginBottom:"2rem"}},inputRoot:{'&&[class*="MuiOutlinedInput-root"] input':{fontSize:"1.6rem",borderTopLeftRadius:0,borderBottomLeftRadius:0,border:0,outline:0}}}})),ie=function(e){var t=e.handleSearch,n=re(),l=Object(a.useState)(0),r=Object(c.a)(l,2),i=r[0],s=r[1];return Object(b.jsx)("div",{className:n.searchContainer,children:Object(b.jsx)(te.a,{id:"searchbox-id",name:"searchText",InputProps:{startAdornment:Object(b.jsx)(ne.a,{position:"start",children:Object(b.jsx)(le.a,{color:"primary",fontSize:"medium"})}),classes:{root:n.inputRoot}},placeholder:"Search character by name",variant:"outlined",size:"small",onChange:function(e){var n=e.target.value;i&&clearTimeout(i),s(setTimeout((function(){t(n.toLowerCase())}),500))},fullWidth:!0})})},ce=Object(a.memo)(ie),se=n(98),oe=n.n(se),de=n(97),ue=n(202),be=Object(d.a)((function(){return{toolbar:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",margin:"1rem auto","@media(max-width: 480px)":{flexDirection:"column",justifyContent:"center"}},downloadBtn:{'&&[class*="MuiButton-outlined"]':{}},outlinedInput:{'&&[class*="MuiOutlinedInput-root"] .MuiAutocomplete-input':{padding:"0"}},right:{width:"30%",display:"flex",alignItems:"center",justifyContent:"space-between","@media (max-width: 1024px) and (min-width:768px)":{width:"40%"},"@media(max-width: 700px)":{width:"100%"}}}})),me=n(211),je=function(e){var t=e.onSearch,n=e.handleDownload,a=e.data,l=e.filmSuggestions,r=e.onSelect,i=e.disableDownload,c=be();return Object(b.jsxs)("div",{className:c.toolbar,children:[Object(b.jsx)(ce,{handleSearch:t}),Object(b.jsxs)("div",{className:c.right,children:[Object(b.jsx)(ue.a,{disablePortal:!0,id:"film-suggestions",options:l,classes:{inputRoot:c.outlinedInput},fullWidth:!0,renderInput:function(e){return Object(b.jsx)(te.a,Object(ee.a)(Object(ee.a)({},e),{},{placeholder:"Film"}))},onChange:function(e,t){return r(e,t)}}),Object(b.jsx)(de.CSVLink,{data:a||[],filename:"Favourite_Characters.csv",target:"_blank",tabIndex:-1,onClick:function(e){i&&e.preventDefault()},children:Object(b.jsx)(me.a,{title:"Download favourites",children:Object(b.jsx)(g.a,{color:"primary",onClick:n,classes:{root:c.downloadBtn},children:Object(b.jsx)(oe.a,{})})})})]})]})},fe=Object(a.memo)(je),he=n(203),pe=n(99),Oe=n.n(pe),xe=Object(d.a)((function(){return{wrapper:{margin:"2rem auto",padding:"1rem",width:"80%","@media(max-width: 768px)":{width:"90%"}},noResult:{textAlign:"center",color:"red",marginTop:"0.8rem"},loadMore:{visibility:"hidden"},alertRoot:{width:"50%",margin:"auto","@media(max-width: 768px)":{width:"100%"}}}})),ge=function(){var e=xe(),t=Object(a.useContext)(Ae),n="{\n  allPeople(first: ".concat(12,") {\n    pageInfo {\n      endCursor\n      hasNextPage\n    }\n    totalCount\n    people {\n      id\n      name\n      gender\n      height\n      mass\n      birthYear\n      skinColor\n      eyeColor\n      hairColor\n      filmConnection {\n        films {\n          id\n          title\n        }\n      }\n    }\n  }\n}"),l=Object(a.useRef)(null),r=Object(a.useState)(n),i=Object(c.a)(r,2),s=i[0],o=i[1],d=Object(a.useState)(null),u=Object(c.a)(d,2),m=u[0],j=u[1],f=Object(a.useState)(""),x=Object(c.a)(f,2),v=x[0],w=x[1],C=Object(a.useState)(""),y=Object(c.a)(C,2),S=y[0],N=y[1],E=Object(a.useState)([]),k=Object(c.a)(E,2),I=k[0],P=k[1],A=Object(a.useState)(t.favChars||[]),D=Object(c.a)(A,2),V=D[0],z=D[1],L=Object(a.useState)([]),F=Object(c.a)(L,2),R=F[0],B=F[1],M=Object(a.useState)(!1),T=Object(c.a)(M,2),W=T[0],Y=T[1],H=Object(a.useState)(""),_=Object(c.a)(H,2),q=_[0],G=_[1],J=Object(a.useState)([]),Z=Object(c.a)(J,2),K=Z[0],Q=Z[1],U=Object(a.useState)(!1),ee=Object(c.a)(U,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(null),le=Object(c.a)(ae,2),re=le[0],ie=le[1],ce=Object(a.useState)([]),se=Object(c.a)(ce,2),oe=se[0],de=se[1],ue=Object(a.useState)(!1),be=Object(c.a)(ue,2),me=be[0],je=be[1],pe=Object(a.useCallback)((function(e){w(e)}),[]),ge=Object(a.useCallback)((function(){(function(){var e=Object(O.a)(h.a.mark((function e(){var t,n,a,r,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(!0),e.prev=1,e.next=4,fetch("https://swapi-graphql.netlify.app/.netlify/functions/index",{method:"post",headers:{"Content-Type":"application/graphql"},body:s});case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,(a=n.data.allPeople)&&(r=a.totalCount>0?a.people:[],Q((function(e){return[].concat(Object(p.a)(e),Object(p.a)(r))})),P((function(e){return[].concat(Object(p.a)(e),Object(p.a)(r))})),a.pageInfo.hasNextPage?(ne(!0),l.current=a.pageInfo.endCursor):(ne(!1),l.current=null)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),i=e.t0.message||e.t0,G(i);case 16:return e.prev=16,Y(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])})));return function(){return e.apply(this,arguments)}})()()}),[s]),ve=Object(a.useRef)(new IntersectionObserver((function(e){e[0].isIntersecting&&j(l.current)}),{root:null,rootMargin:"2px",threshold:1})),we=Object(a.useCallback)((function(e,n){e.target.closest("svg")&&e.stopPropagation();var a=Object(p.a)(V);V.includes(n)?a=V.filter((function(e){return e!==n})):a.push(n),z(a),t.setFavChars(a)}),[V,t]),Ce=Object(a.useCallback)((function(){if(0===V.length)G("Please select favourites to download"),je(!0);else{var e=K.filter((function(e){return V.includes(e.id)}));B(e)}}),[V,K]);Object(a.useEffect)((function(){var e=I.filter((function(e){return v&&S?e.name.toLowerCase().includes(v)&&e.filmConnection.films.some((function(e){return e.title.toLowerCase().includes(S)})):v?e.name.toLowerCase().includes(v):e.filmConnection.films.some((function(e){return e.title.toLowerCase().includes(S)}))}));Q(e)}),[v,S,I]);var ye=Object(a.useCallback)((function(e,t){N(t?t.toLowerCase():"")}),[]),Se=Object(a.useCallback)((function(){var e=[];I.forEach((function(t){t.filmConnection.films.forEach((function(t){e.includes(t.title)||e.push(t.title)}))})),de(e)}),[I]);return Object(a.useEffect)((function(){Se()}),[Se]),Object(a.useEffect)((function(){ge()}),[ge]),Object(a.useEffect)((function(){if(m){var e="\n      {\n        allPeople(first: ".concat(12,' after:"').concat(m,'") {\n          pageInfo {\n            endCursor\n            hasNextPage\n          }\n          totalCount\n          people {\n            id\n            name\n            gender\n            height\n            mass\n            birthYear\n            skinColor\n            eyeColor\n            hairColor\n            filmConnection {\n              films {\n                id\n                title\n              }\n            }\n          }\n        }\n      }');o(e)}}),[m]),Object(a.useEffect)((function(){var e=re,t=ve.current;return e&&t.observe(e),function(){e&&t.unobserve(e)}}),[re]),Object(b.jsxs)("div",{className:e.wrapper,"data-testid":"main-container",children:[me&&Object(b.jsx)(he.a,{severity:"error",action:Object(b.jsx)(g.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){je(!1)},children:Object(b.jsx)(Oe.a,{fontSize:"inherit"})}),classes:{root:e.alertRoot},children:q}),Object(b.jsx)(fe,{data:R,onSearch:pe,handleDownload:Ce,filmSuggestions:oe,onSelect:ye,disableDownload:0===V.length}),Object(b.jsx)(X,{list:K,toggleFavorite:we,favouriteList:V}),W?Object(b.jsx)($,{}):Object(b.jsx)(b.Fragment,{children:(q||0===K.length)&&Object(b.jsx)("div",{className:e.noResult,children:"No result!!!"})}),!W&&te&&Object(b.jsx)("div",{ref:ie})]})},ve=function(){return Object(b.jsx)("div",{children:"Oops!! Page not found"})},we=Object(a.memo)(ve),Ce=n(207),ye=Object(d.a)((function(e){return{wrapper:{display:"flex",flexDirection:"column",margin:"2rem auto","& > a":{textAlign:"center",textDecoration:"none",margin:"1rem 0"}},card:{width:"60%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",margin:"auto",padding:"2rem","@media(max-width: 768px)":{width:"90%"}},title:{textAlign:"center",margin:"auto",padding:"1rem",color:e.palette.primary.main,fontSize:"2.4rem"},details:{width:"100%",height:"100%",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem",fontSize:"1.6rem",padding:"0.5rem",margin:"1rem auto"},label:{textAlign:"right",fontWeight:600,opacity:"0.7","&::after":{content:'":"'}},labelValue:{textAlign:"left",overflow:"hidden",textOverflow:"ellipsis"},divider:{width:"60%"}}})),Se=function(){var e,t,n=ye(),a=Object(o.g)(),l=a.location.state?a.location.state.item:null,r=(null===l||void 0===l||null===(e=l.filmConnection)||void 0===e||null===(t=e.films)||void 0===t?void 0:t.map((function(e){return e.title})))||[],i=r.length>0?r.join(", ").toString():"NA";return Object(b.jsxs)("div",{className:n.wrapper,children:[l?Object(b.jsxs)(x.a,{className:n.card,children:[Object(b.jsx)("div",{className:n.title,children:l.name}),Object(b.jsx)(Ce.a,{className:n.divider}),Object(b.jsxs)("div",{className:n.details,children:[Object(b.jsx)("label",{className:n.label,children:"Birth Year"}),Object(b.jsx)("span",{className:n.labelValue,children:l.birthYear}),Object(b.jsx)("label",{className:n.label,children:"Gender"}),Object(b.jsx)("span",{className:n.labelValue,children:l.gender}),Object(b.jsx)("label",{className:n.label,children:"Species"}),Object(b.jsx)("span",{className:n.labelValue,children:l.species&&l.species.length||"NA"}),Object(b.jsx)("label",{className:n.label,children:"Height"}),Object(b.jsx)("span",{className:n.labelValue,children:l.height}),Object(b.jsx)("label",{className:n.label,children:"Weight"}),Object(b.jsx)("span",{className:n.labelValue,children:l.mass}),Object(b.jsx)("label",{className:n.label,children:"Eye Color"}),Object(b.jsx)("span",{className:n.labelValue,children:l.eyeColor}),Object(b.jsx)("label",{className:n.label,children:"Skin Color"}),Object(b.jsx)("span",{className:n.labelValue,children:l.skinColor}),Object(b.jsx)("label",{className:n.label,children:"Hair Color"}),Object(b.jsx)("span",{className:n.labelValue,children:l.hairColor}),Object(b.jsxs)("label",{className:n.label,children:["Films (",l.filmConnection.films.length,")"]}),Object(b.jsx)("span",{className:n.labelValue,children:Object(b.jsx)("span",{children:i})})]})]}):Object(b.jsx)(o.a,{to:"/"}),Object(b.jsx)(s.b,{to:"/",children:"Back to Homepage"})]})},Ne=Object(a.memo)(Se),Ee=n(212),ke=n(100),Ie=Object(ke.a)({palette:{primary:{main:"#673ab7"},secondary:{main:"#f50057"}},typography:{fontFamily:'"Crimson Pro", serif',htmlFontSize:10}}),Pe=function(e){var t=e.children;return Object(b.jsx)(Ee.a,{theme:Ie,children:t})},Ae=(n(134),Object(a.createContext)({favChars:[],setFavChars:function(){}}));var De=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],l=t[1];return Object(b.jsx)(Ae.Provider,{value:{favChars:n,setFavChars:l},children:Object(b.jsx)(Pe,{children:Object(b.jsx)(s.a,{basename:"/star-wars-app",children:Object(b.jsxs)("div",{"data-testid":"app-id",children:[Object(b.jsx)(j,{}),Object(b.jsx)("div",{children:Object(b.jsxs)(o.d,{children:[Object(b.jsx)(o.b,{exact:!0,path:"/",component:ge}),Object(b.jsx)(o.b,{exact:!0,path:"/character-details",component:Ne}),Object(b.jsx)(o.b,{path:"",component:we})]})})]})})})})};i.a.render(Object(b.jsx)(l.a.StrictMode,{children:Object(b.jsx)(De,{})}),document.getElementById("root"))}},[[135,1,2]]]);
//# sourceMappingURL=main.53f66221.chunk.js.map